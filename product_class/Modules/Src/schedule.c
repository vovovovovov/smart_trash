#include "headfile.h"


struct TaskStruct TaskST[]=
{
 //  ???   ????ms???????    ???????§Ò??¦Ë    ?????????
	{ 0,       500,              0,           RED_Led},
	{ 0,       100,              0,		   GREEN_Led},
};


/*******************************??????????????????********************************/

//???????????
uint8_t TaskCount=	sizeof(TaskST)/sizeof(TaskST[0]);	

//?????TIM2_IRQHandler???§Ø???§µ???????????
void OS_IT_RUN(void)
{
	uint8_t i;
	for(i=0;i<TaskCount;i++)//???????????
	{	
		if(!TaskST[i].TaskStatus)
		{		
			if(++TaskST[i].TaskTickNow >= TaskST[i].TaskTickMax)//????????§Ø?????????
			{	
				TaskST[i].TaskTickNow = 0;
				TaskST[i].TaskStatus = 1;
			}
		}
	}
}

//????main????????§µ?????????????????§Û????????
		void PeachOSRun(void)
{
	uint8_t j=0;
	while(1)
	{
		if(TaskST[j].TaskStatus)//?§Ø??????????????
		{		
			TaskST[j].FC();				//??§Ú???????
			TaskST[j].TaskStatus=0;		//?????????????
		}
		if(++j>=TaskCount)//?????????????????§Ö?????
			j=0;		
	}
}
/*******************************??????????????????********************************/


/*************************??????§Ö?????*****************************/
void RED_Led(void)
{
	//printf("RED_Led \n");//?????????????????uart????????????¦Ä???
	HAL_GPIO_TogglePin(GPIOA,LED_RED_Pin);
	
}
	
void GREEN_Led(void)
{
	//printf("GREEN_Led \n");//??????
	HAL_GPIO_TogglePin(GPIOA,LED_GREEN_Pin);
}

/*************************??????§Ö?????*****************************/
	